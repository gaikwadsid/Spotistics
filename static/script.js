const songAudioData = {
  "danceability": 0.631,
  "energy": 0.518,
  "key": 0,
  "loudness": -8.771,
  "mode": 1,
  "speechiness": 0.0303,
  "acousticness": 0.274,
  "instrumentalness": 0,
  "liveness": 0.088,
  "valence": 0.205,
  "tempo": 93.023,
  "type": "audio_features",
  "id": "5enxwA8aAbwZbf5qCHORXi",
  "uri": "spotify:track:5enxwA8aAbwZbf5qCHORXi",
  "track_href": "https://api.spotify.com/v1/tracks/5enxwA8aAbwZbf5qCHORXi",
  "analysis_url": "https://api.spotify.com/v1/audio-analysis/5enxwA8aAbwZbf5qCHORXi",
  "duration_ms": 613027,
  "time_signature": 4
}

const songInfo = {
  "album": {
      "album_type": "album",
      "artists": [
          {
              "external_urls": {
                  "spotify": "https://open.spotify.com/artist/06HL4z0CvFAxyc27GXpf02"
              },
              "href": "https://api.spotify.com/v1/artists/06HL4z0CvFAxyc27GXpf02",
              "id": "06HL4z0CvFAxyc27GXpf02",
              "name": "Taylor Swift",
              "type": "artist",
              "uri": "spotify:artist:06HL4z0CvFAxyc27GXpf02"
          }
      ],
      "available_markets": [],
      "external_urls": {
          "spotify": "https://open.spotify.com/album/6kZ42qRrzov54LcAk4onW9"
      },
      "href": "https://api.spotify.com/v1/albums/6kZ42qRrzov54LcAk4onW9",
      "id": "6kZ42qRrzov54LcAk4onW9",
      "images": [
          {
              "height": 640,
              "url": "https://i.scdn.co/image/ab67616d0000b273318443aab3531a0558e79a4d",
              "width": 640
          },
          {
              "height": 300,
              "url": "https://i.scdn.co/image/ab67616d00001e02318443aab3531a0558e79a4d",
              "width": 300
          },
          {
              "height": 64,
              "url": "https://i.scdn.co/image/ab67616d00004851318443aab3531a0558e79a4d",
              "width": 64
          }
      ],
      "name": "Red (Taylor's Version)",
      "release_date": "2021-11-12",
      "release_date_precision": "day",
      "total_tracks": 30,
      "type": "album",
      "uri": "spotify:album:6kZ42qRrzov54LcAk4onW9"
  },
  "artists": [
      {
          "external_urls": {
              "spotify": "https://open.spotify.com/artist/06HL4z0CvFAxyc27GXpf02"
          },
          "href": "https://api.spotify.com/v1/artists/06HL4z0CvFAxyc27GXpf02",
          "id": "06HL4z0CvFAxyc27GXpf02",
          "name": "Taylor Swift",
          "type": "artist",
          "uri": "spotify:artist:06HL4z0CvFAxyc27GXpf02"
      }
  ],
  "available_markets": [],
  "disc_number": 1,
  "duration_ms": 613026,
  "explicit": true,
  "external_ids": {
      "isrc": "USUG12103690"
  },
  "external_urls": {
      "spotify": "https://open.spotify.com/track/5enxwA8aAbwZbf5qCHORXi"
  },
  "href": "https://api.spotify.com/v1/tracks/5enxwA8aAbwZbf5qCHORXi",
  "id": "5enxwA8aAbwZbf5qCHORXi",
  "is_local": false,
  "name": "All Too Well (10 Minute Version) (Taylor's Version) (From The Vault)",
  "popularity": 90,
  "preview_url": null,
  "track_number": 30,
  "type": "track",
  "uri": "spotify:track:5enxwA8aAbwZbf5qCHORXi"
}

const pyreInfo = {
  "album": {
      "album_type": "album",
      "artists": [
          {
              "external_urls": {
                  "spotify": "https://open.spotify.com/artist/0ZMWrgLff357yxLyEU77a1"
              },
              "href": "https://api.spotify.com/v1/artists/0ZMWrgLff357yxLyEU77a1",
              "id": "0ZMWrgLff357yxLyEU77a1",
              "name": "Darren Korb",
              "type": "artist",
              "uri": "spotify:artist:0ZMWrgLff357yxLyEU77a1"
          }
      ],
      "available_markets": [],
      "external_urls": {
          "spotify": "https://open.spotify.com/album/6Q55ods6yVhg1035RgH2kU"
      },
      "href": "https://api.spotify.com/v1/albums/6Q55ods6yVhg1035RgH2kU",
      "id": "6Q55ods6yVhg1035RgH2kU",
      "images": [
          {
              "height": 640,
              "url": "https://i.scdn.co/image/ab67616d0000b273335e628ccdf95c5a4c5a4053",
              "width": 640
          },
          {
              "height": 300,
              "url": "https://i.scdn.co/image/ab67616d00001e02335e628ccdf95c5a4c5a4053",
              "width": 300
          },
          {
              "height": 64,
              "url": "https://i.scdn.co/image/ab67616d00004851335e628ccdf95c5a4c5a4053",
              "width": 64
          }
      ],
      "name": "Pyre (Original Soundtrack)",
      "release_date": "2017-07-25",
      "release_date_precision": "day",
      "total_tracks": 39,
      "type": "album",
      "uri": "spotify:album:6Q55ods6yVhg1035RgH2kU"
  },
  "artists": [
      {
          "external_urls": {
              "spotify": "https://open.spotify.com/artist/0ZMWrgLff357yxLyEU77a1"
          },
          "href": "https://api.spotify.com/v1/artists/0ZMWrgLff357yxLyEU77a1",
          "id": "0ZMWrgLff357yxLyEU77a1",
          "name": "Darren Korb",
          "type": "artist",
          "uri": "spotify:artist:0ZMWrgLff357yxLyEU77a1"
      },
      {
          "external_urls": {
              "spotify": "https://open.spotify.com/artist/5x5ymm4vyLlpwWOXmOJ7zg"
          },
          "href": "https://api.spotify.com/v1/artists/5x5ymm4vyLlpwWOXmOJ7zg",
          "id": "5x5ymm4vyLlpwWOXmOJ7zg",
          "name": "Ashley Barrett",
          "type": "artist",
          "uri": "spotify:artist:5x5ymm4vyLlpwWOXmOJ7zg"
      }
  ],
  "available_markets": [],
  "disc_number": 1,
  "duration_ms": 189543,
  "explicit": false,
  "external_ids": {
      "isrc": "TCADE1746624"
  },
  "external_urls": {
      "spotify": "https://open.spotify.com/track/4IRpbTrTCHkP3aeRO48tZs"
  },
  "href": "https://api.spotify.com/v1/tracks/4IRpbTrTCHkP3aeRO48tZs",
  "id": "4IRpbTrTCHkP3aeRO48tZs",
  "is_local": false,
  "name": "In the Flame (feat. Ashley Barrett)",
  "popularity": 37,
  "preview_url": "https://p.scdn.co/mp3-preview/69692f7bbd07fc5b055fb4253b064f157036ad0b?cid=742fe7261a8148dcb2b2588ce2dee426",
  "track_number": 1,
  "type": "track",
  "uri": "spotify:track:4IRpbTrTCHkP3aeRO48tZs"
}

const pyreAudioInfo = {
  "danceability": 0.26,
  "energy": 0.765,
  "key": 4,
  "loudness": -4.926,
  "mode": 0,
  "speechiness": 0.0559,
  "acousticness": 0.356,
  "instrumentalness": 0,
  "liveness": 0.107,
  "valence": 0.238,
  "tempo": 81.646,
  "type": "audio_features",
  "id": "4IRpbTrTCHkP3aeRO48tZs",
  "uri": "spotify:track:4IRpbTrTCHkP3aeRO48tZs",
  "track_href": "https://api.spotify.com/v1/tracks/4IRpbTrTCHkP3aeRO48tZs",
  "analysis_url": "https://api.spotify.com/v1/audio-analysis/4IRpbTrTCHkP3aeRO48tZs",
  "duration_ms": 189543,
  "time_signature": 3
}

const albumTitle = document.getElementById("album-title")
const songTitle = document.getElementById("song-title")
const artistTitle = document.getElementById("artist-name")
const albumArt = document.getElementById("album-art")
const danceability = document.getElementById("danceability-stat")
const energy = document.getElementById("energy-stat")
const speechiness = document.getElementById("speechiness-stat")

function populateUI(info, audioData) {
  albumArt.src = info.album.images[0].url
  albumTitle.textContent = info.album.name
  songTitle.textContent = info.name
  artistTitle.textContent = info.artists.map(artist=>artist.name).join(", ")
  danceability.style.width = audioData.danceability * 100 + "%"
  energy.style.width = audioData.energy * 100 + "%"
  speechiness.style.width = audioData.speechiness * 100 + "%"
  handleColorQuantization()
}

populateUI(pyreInfo, pyreAudioInfo)

function handleColorQuantization() {
  const thief = new ColorThief()
  const palette = thief.getPalette(albumArt)
  document.body.style.backgroundImage = palette.map(randomRadial).join(", ");
}

function randomRadial(color) {
  const x = Math.ceil(Math.random() * 100)
  const y = Math.ceil(Math.random() * 100)
  return `radial-gradient(at ${x}% ${y}%, rgb(${color[0]}, ${color[1]}, ${color[2]}) 0, transparent 50%)`
}

// console.log(randomRadial([50, 50, 50]))